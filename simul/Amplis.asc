Version 4
SHEET 1 880 680
WIRE 272 -16 128 -16
WIRE -48 16 -224 16
WIRE -224 32 -224 16
WIRE 128 80 128 -16
WIRE 160 80 128 80
WIRE 272 96 272 -16
WIRE 272 96 224 96
WIRE 480 96 272 96
WIRE -48 112 -48 96
WIRE 160 112 -48 112
WIRE -48 128 -48 112
WIRE 288 272 240 272
WIRE 128 400 128 352
WIRE 160 400 160 272
WIRE 160 400 128 400
WIRE 176 400 160 400
WIRE 288 416 288 272
WIRE 288 416 240 416
WIRE 432 416 288 416
WIRE -48 432 -48 400
WIRE 176 432 -48 432
WIRE -48 528 -48 512
FLAG -48 208 0
FLAG -48 320 3V3
FLAG -48 528 0
FLAG 48 352 0
FLAG -224 112 0
FLAG 480 176 0
FLAG 432 496 0
SYMBOL res -64 112 R0
SYMATTR InstName R1
SYMATTR Value 68k
SYMBOL res -64 0 R0
SYMATTR InstName R2
SYMATTR Value 47k
SYMBOL res -64 304 R0
SYMATTR InstName R3
SYMATTR Value 43k
SYMBOL res -64 416 R0
SYMATTR InstName R4
SYMATTR Value 68k
SYMBOL current 48 352 R270
WINDOW 0 32 40 VTop 2
WINDOW 3 -32 40 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 20m
SYMBOL res 256 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL voltage -224 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 2.9
SYMBOL opamp 192 32 R0
SYMATTR InstName U3
SYMBOL opamp 208 352 R0
SYMATTR InstName U4
SYMBOL res 464 80 R0
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL res 416 400 R0
SYMATTR InstName R7
SYMATTR Value 100k
TEXT -258 552 Left 2 !.tran 5m
